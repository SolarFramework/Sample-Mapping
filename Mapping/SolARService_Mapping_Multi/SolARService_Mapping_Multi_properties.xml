<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<xpcf-registry autoAlias="true">

<properties>
    <!-- server configuration -->
<!--
    <configure component="GrpcServerManager">
        <property name="server_address" access="rw" type="string" value="0.0.0.0:8080"/>
        <property name="server_credentials" access="rw" type="uint" value="0"/>
        <property name="max_receive_message_size" access="rw" type="uint" value="7000000"/>
        <property name="max_send_message_size" access="rw" type="uint" value="2000000"/>
    </configure>
-->
    <!-- gRPC proxy configuration-->
    <configure component="d9da863c-c9ff-4562-a3a2-329ac1f44008">
        <property name="channelUrl" access="rw" type="string" value="0.0.0.0:50053"/>
        <property name="channelCredentials" access="rw" type="uint" value="0"/>
    </configure>

    <!-- mapping pipeline configuration -->
    <configure component="SolARSLAMBootstrapper">
        <property name="hasPose" type="int" value="1"/>
        <property name="nbMinInitPointCloud" type="int" value="50"/>
        <property name="angleThres" type="float" value="0.08"/>
    </configure>
    <configure component="SolARSLAMTracking">
        <property name="minWeightNeighbor" type="float" value="50.0"/>
        <property name="displayTrackedPoints" type="int" value="1"/>
        <property name="thresAngleViewDirection" type="float" value="0.8"/>
    </configure>
    <configure component="SolARSLAMMapping">
        <property name="minWeightNeighbor" type="float" value="5.0"/>
        <property name="maxNbNeighborKfs" type="int" value="8"/>
        <property name="nbPassedFrameAtLeast" type="int" value="1"/>
        <property name="ratioCPRefKeyframe" type="float" value="0.5"/>
        <property name="minTrackedPoints" type="int" value="200"/>
    </configure>
    <configure component="SolARMapManager">
        <property name="directory" type="string" value="../../data/map_hololens/mapA"/>
        <property name="identificationFileName" type="string" value="identification.bin"/>
        <property name="coordinateFileName" type="string" value="coordinate.bin"/>
        <property name="pointCloudManagerFileName" type="string" value="pointcloud.bin"/>
        <property name="keyframesManagerFileName" type="string" value="keyframes.bin"/>
        <property name="covisibilityGraphFileName" type="string" value="covisibility_graph.bin"/>
        <property name="keyframeRetrieverFileName" type="string" value="keyframe_retriever.bin"/>
        <property name="reprojErrorThreshold" type="float" value="5.0"/>
        <property name="thresConfidence" type="float" value="0.03"/>
    </configure>
    <configure component="SolARKeypointDetectorOpencv">
        <property name="type" type="string" value="AKAZE2"/>
        <property name="imageRatio" type="float" value="1.0"/>
        <property name="nbDescriptors" type="int" value="2000"/>
        <property name="nbOctaves" type="int" value="4"/>
        <property name="threshold" type="float" value="0.0001"/>
        <property name="borderRatio" type="float" value="0.0"/>
    </configure>
    <configure component="SolARDescriptorsExtractorAKAZEOpencv">
        <property name="threshold" type="float" value="3e-4"/>
    </configure>
    <configure component="SolARDescriptorsExtractorAKAZE2Opencv">
        <property name="threshold" type="float" value="3e-4"/>
    </configure>
    <configure component="SolARDescriptorsExtractorORBOpencv">
        <property name="threshold" type="float" value="3e-4"/>
    </configure>
    <configure component="SolARDescriptorsExtractorSIFTOpencv">
        <property name="nbFeatures" type="int" value="2000"/>
        <property name="nbOctaveLayers" type="int" value="4"/>
    </configure>
    <configure component="SolARDescriptorMatcherKNNOpencv">
		<property name="distanceRatio" type="float" value="0.8"/>
	</configure>
	<configure component="SolARDescriptorMatcherRegionOpencv">
		<property name="distanceRatio" type="float" value="0.8"/>
		<property name="radius" type="float" value="15"/>
		<property name="matchingDistanceMax" type="float" value="500"/>
	</configure>
	<configure component="SolARDescriptorMatcherGeometricOpencv">
		<property name="distanceRatio" type="float" value="0.7"/>
		<property name="paddingRatio" type="float" value="0.003"/>
		<property name="matchingDistanceMax" type="float" value="500"/>
	</configure>
    <configure component="SolARDescriptorMatcherHammingBruteForceOpencv">
        <property name="distanceRatio" type="float" value="0.9"/>
    </configure>
    <configure component="SolARDescriptorMatcherRadiusOpencv">
        <property name="maxDistance" type="float" value="0.9"/>
    </configure>
    <configure component="SolARGeometricMatchesFilterOpencv">
        <property name="confidence" type="float" value="0.99"/>
        <property name="outlierDistanceRatio" type="float" value="0.005"/>
        <property name="epilinesDistance" type="float" value="3.0"/>
    </configure>
    <configure component="SolARPoseEstimationSACPnpOpencv">
        <property name="iterationsCount" type="int" value="500"/>
        <property name="reprojError" type="float" value="3.0"/>
        <property name="confidence" type="float" value="0.99"/>
        <property name="minNbInliers" type="int" value="15"/>
    </configure>
    <configure component="SolARMapFilter">
        <property name="reprojErrorThreshold" type="float" value="5.0"/>
        <property name="minTriangulationAngle" type="float" value="0.01"/>
        <property name="maxTriangulationAngle" type="float" value="2.0"/>
        <property name="cheiralityCheck" type="int" value="1"/>
    </configure>
    <configure component="SolARKeyframeSelector">
        <property name="minNbMatchesIsKeyframe" type="int" value="50"/>
        <property name="minMeanDistanceIsKeyframe" type="float" value="0.04"/>
    </configure>
    <configure component="SolARKeyframeRetrieverFBOW">
        <property name="VOCpath" type="string" value="../../data/fbow_voc/akaze.fbow"/>
        <property name="threshold" type="float" value="0.01"/>
        <property name="level" type="int" value="3"/>
        <property name="matchingDistanceRatio" type="float" value="0.8"/>
        <property name="matchingDistanceMax" type="float" value="800"/>
    </configure>
    <configure component="SolAR3DTransformEstimationSACFrom3D3D">
        <property name="iterationsCount" type="int" value="500"/>
        <property name="reprojError" type="float" value="3.0"/>
        <property name="confidence" type="float" value="0.9"/>
        <property name="minNbInliers" type="int" value="20"/>
    </configure>
    <configure component="SolARPoseFinderFrom2D2DOpencv">
        <property name="confidence" type="float" value="0.99"/>
        <property name="outlierDistanceRatio" type="float" value="0.005"/>
    </configure>
    <configure component="SolARLoopClosureDetector">
        <property name="minNbInliers" type="int" value="30"/>
    </configure>
    <configure component="SolARMatchesOverlayOpencv">
        <property name="thickness" type="uint" value="1"/>
        <property name="mode" type="string" value="COLOR"/>
        <property name="color" type="uint">
            <value>0</value>
            <value>255</value>
            <value>0</value>
        </property>
    </configure>
    <configure component="SolAROptimizationG2O">
        <property name="nbIterationsLocal" type="int" value="10"/>
        <property name="nbIterationsGlobal" type="int" value="20"/>
        <property name="setVerbose" type="int" value="0"/>
        <property name="nbMaxFixedKeyframes" type="int" value="20"/>
        <property name="errorOutlier" type="float" value="5.0"/>
        <property name="useSpanningTree" type="int" value="0"/>
        <property name="isRobust" type="int" value="0"/>
        <property name="fixedMap" type="int" value="0"/>
        <property name="fixedKeyframes" type="int" value="0"/>
    </configure>
    <configure component="SolAROptimizationG2O" name="BundleFixedKeyframesProperties">
        <property name="nbIterationsLocal" type="int" value="10"/>
        <property name="nbIterationsGlobal" type="int" value="20"/>
        <property name="setVerbose" type="int" value="0"/>
        <property name="nbMaxFixedKeyframes" type="int" value="20"/>
        <property name="errorOutlier" type="float" value="5.0"/>
        <property name="useSpanningTree" type="int" value="0"/>
        <property name="isRobust" type="int" value="0"/>
        <property name="fixedMap" type="int" value="0"/>
        <property name="fixedKeyframes" type="int" value="1"/>
    </configure>
    <configure component="SolARMarker2DSquaredBinaryOpencv">
        <property name="filePath" type="string" value="fiducialMarker.yml" description="Path of the .yml file describing the fiducial marker."/>
    </configure>
    <configure component="SolARImageFilterBinaryOpencv">
        <property name="min" type="int" value="-1" description="minimum threshold (-1 to automatically compute it on the global image"/>
        <property name="max" type="int" value="255" description="maximum threshold"/>
    </configure>
    <configure component="SolARContoursExtractorOpencv">
        <property name="minContourEdges" type="int" value="4" description="Minimum number of edge to validate a contour (default = 4)"/>
    </configure>
    <configure component="SolARContoursFilterBinaryMarkerOpencv">
        <property name="epsilon" type="float" value="0.05" description="The maximum distance between the original curve and its approximation (default = 0.05)"/>
        <property name="minContourLength" type="float" value="20.0" description="The minimum length of an edge of the contour in pixels to be considered as valid (default = 20)."/>
        <property name="minDistanceBetweenContourCorners" type="float" value="10.0" description="The minimum average distance in pixels between corners of a contour and the same corners of another contour to consider the contour as valid (default = 10)"/>
    </configure>
    <configure component="SolARPerspectiveControllerOpencv">
        <property name="outputImageWidth" type="int" value="640" description="The width in pixels of the corrected image."/>
        <property name="outputImageHeight" type="int" value="480" description="The width in pixels of the corrected image."/>
    </configure>

</properties>

</xpcf-registry>
